@model JazMax.Web.ViewModel.UserAccountView.BranchDetailsView
@using JazMax.Core.SystemHelpers;

@{
    ViewBag.Title = "Details";
    JazMaxIdentityHelper.UserName = User.Identity.Name;
}

<h2>@Model.CoreBranchView.BranchName</h2>
<hr />

@if (JazMaxIdentityHelper.IsUserInRole("PA,CEO"))
{
    <div class="btn-group btn-group-justified">
        <a href="#" id="show" class="btn btn-primary" value="Edit">Update</a>

    </div>
}
<table class="table">
    <tr>
        <td width="30%">
            <div>
                <hr />
                <dl>

                    <dt>
                        @Html.DisplayNameFor(model => model.CoreBranchView.BranchName)
                    </dt>

                    <dd>
                        @Html.DisplayFor(model => model.CoreBranchView.BranchName)
                    </dd>

                    <dt>
                        @Html.DisplayNameFor(model => model.CoreBranchView.Phone)
                    </dt>

                    <dd>
                        @Html.DisplayFor(model => model.CoreBranchView.Phone)
                    </dd>

                    <dt>
                        @Html.DisplayNameFor(model => model.CoreBranchView.EmailAddress)
                    </dt>

                    <dd>
                        @Html.DisplayFor(model => model.CoreBranchView.EmailAddress)
                    </dd>

                    <dt>
                        @Html.DisplayNameFor(model => model.CoreBranchView.StreetAddress)
                    </dt>

                    <dd>
                        @Html.DisplayFor(model => model.CoreBranchView.StreetAddress)
                    </dd>

                    <dt>
                        @Html.DisplayNameFor(model => model.CoreBranchView.City)
                    </dt>

                    <dd>
                        @Html.DisplayFor(model => model.CoreBranchView.City)
                    </dd>

                    <dt>
                        @Html.DisplayNameFor(model => model.CoreBranchView.Suburb)
                    </dt>

                    <dd>
                        @Html.DisplayFor(model => model.CoreBranchView.Suburb)
                    </dd>

                    <dt>
                        @Html.DisplayNameFor(model => model.CoreBranchView.TeamLeaderName)
                    </dt>

                    <dd>
                        @Html.DisplayFor(model => model.CoreBranchView.TeamLeaderName)
                    </dd>

                    <dt>
                        @Html.DisplayNameFor(model => model.CoreBranchView.ProvinceName)
                    </dt>

                    <dd>
                        @Html.DisplayFor(model => model.CoreBranchView.ProvinceName)
                    </dd>

                </dl>
            </div>


        </td>
        <td width="70%">
            <div id="editTheDiv" hidden>
                @{
                    Html.RenderAction("Update", "Branch", Model.CoreBranchView.BranchId);
                }
            </div>
        </td>
    </tr>
</table>

<hr />
<h3>Agents</h3>
<hr />

@if (Model.AgentDetailsView.Any())
{

    <table id="tblAgent" class="table table-striped table-bordered dt-responsive nowrap" width="100%" cellspacing="0">

        <thead>


            <tr>

                <th>
                    First Name
                </th>
                <th>
                    Middle Name
                </th>
                <th>
                    Last Name
                </th>

                <th>
                    Phone
                </th>
                <th>
                    Cell Phone
                </th>
                <th>
                    Email Address
                </th>


                <th></th>
            </tr>
        </thead>
        @foreach (var item in Model.AgentDetailsView)
        {
            <tr>

                <td>
                    @Html.DisplayFor(modelItem => item.FirstName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.MiddleName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.LastName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.PhoneNumber)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.CellPhone)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.EmailAddress)
                </td>
            </tr>

        }

    </table>
}
else
{
    <p>There are no agents assigned to this branch</p>
}

<script>
    $('#tblAgent').DataTable();
</script>


<script>
    $("#show").click(function () {
        $("#editTheDiv").toggle();
    });
</script>